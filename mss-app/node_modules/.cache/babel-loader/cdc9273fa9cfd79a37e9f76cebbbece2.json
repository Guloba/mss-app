{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Me\\\\OneDrive\\\\Desktop\\\\Project\\\\mss-app\\\\src\\\\MainChat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport \"./SidebarChats.css\";\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport db from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SidebarChats({\n  channelname,\n  id\n}) {\n  _s();\n\n  var _messages;\n\n  const [randomNumber, setRandom] = useState('');\n  const [messages, setMessages] = useState([]); //algo to generate random number\n\n  useEffect(() => {\n    setRandom(Math.floor(Math.random() * 10000));\n  }, []); //useEffect to render last message in this channel\n\n  useEffect(() => {\n    if (id) {\n      db.collection('Room').doc(id).collection('Messages').orderBy('timestamp', 'asc').onSnapshot(snap => {\n        setMessages(snap.docs.map(doc => doc.data()));\n      });\n    }\n  }, []);\n  console.log(messages);\n  return /*#__PURE__*/_jsxDEV(Link, {\n    className: \"link\",\n    to: `/rooms/${id}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chats\",\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: `https://avatars.dicebear.com/api/human/${randomNumber}.svg`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: channelname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: (_messages = messages[messages.length - 1]) === null || _messages === void 0 ? void 0 : _messages.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n        badgeContent: 4,\n        color: \"secondary\",\n        children: /*#__PURE__*/_jsxDEV(MailIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SidebarChats, \"4QSNruUmmydBHVNSI4+7mvKeWZU=\");\n\n_c = SidebarChats;\nexport default SidebarChats;\n\nvar _c;\n\n$RefreshReg$(_c, \"SidebarChats\");","map":{"version":3,"sources":["C:/Users/Me/OneDrive/Desktop/Project/mss-app/src/MainChat.js"],"names":["React","useEffect","useState","Avatar","IconButton","Link","Badge","MailIcon","db","SidebarChats","channelname","id","randomNumber","setRandom","messages","setMessages","Math","floor","random","collection","doc","orderBy","onSnapshot","snap","docs","map","data","console","log","length","text"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,OAAO,oBAAP;AACA,SAAQC,MAAR,EAAgBC,UAAhB,QAAiC,mBAAjC;AACA,SAASC,IAAT,QAAoB,kBAApB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,EAAP,MAAe,YAAf;;;AACA,SAASC,YAAT,CAAsB;AAACC,EAAAA,WAAD;AAAaC,EAAAA;AAAb,CAAtB,EAAwC;AAAA;;AAAA;;AACrC,QAAK,CAACC,YAAD,EAAcC,SAAd,IAAyBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACY,QAAD,EAAUC,WAAV,IAAuBb,QAAQ,CAAC,EAAD,CAArC,CAFqC,CAIpC;;AACAD,EAAAA,SAAS,CAAC,MAAI;AACVY,IAAAA,SAAS,CAACG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAc,KAAzB,CAAD,CAAT;AACH,GAFQ,EAEP,EAFO,CAAT,CALoC,CASpC;;AACAjB,EAAAA,SAAS,CAAC,MAAI;AACR,QAAGU,EAAH,EAAM;AACJH,MAAAA,EAAE,CAACW,UAAH,CAAc,MAAd,EAAsBC,GAAtB,CAA0BT,EAA1B,EAA8BQ,UAA9B,CAAyC,UAAzC,EAAqDE,OAArD,CAA6D,WAA7D,EAAyE,KAAzE,EAAgFC,UAAhF,CAA2FC,IAAI,IAAE;AAC/FR,QAAAA,WAAW,CAACQ,IAAI,CAACC,IAAL,CAAUC,GAAV,CAAcL,GAAG,IAAEA,GAAG,CAACM,IAAJ,EAAnB,CAAD,CAAX;AACD,OAFD;AAGD;AACN,GANQ,EAMP,EANO,CAAT;AAOAC,EAAAA,OAAO,CAACC,GAAR,CAAYd,QAAZ;AAEF,sBACE,QAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,EAAE,EAAG,UAASH,EAAG,EAAxC;AAAA,2BACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA,8BACC,QAAC,MAAD;AAAQ,QAAA,GAAG,EAAG,0CAAyCC,YAAa;AAApE;AAAA;AAAA;AAAA;AAAA,cADD,eAEA;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE;AAAA,oBAAKF;AAAL;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA,iCAAII,QAAQ,CAACA,QAAQ,CAACe,MAAT,GAAgB,CAAjB,CAAZ,8CAAI,UAA6BC;AAAjC;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAMA,QAAC,KAAD;AAAO,QAAA,YAAY,EAAE,CAArB;AAAwB,QAAA,KAAK,EAAC,WAA9B;AAAA,+BACG,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,cANA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADF;AAeD;;GAlCQrB,Y;;KAAAA,Y;AAoCT,eAAeA,YAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport \"./SidebarChats.css\"\r\nimport {Avatar, IconButton} from \"@material-ui/core\"\r\nimport { Link} from \"react-router-dom\";\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport db from \"./firebase\"\r\nfunction SidebarChats({channelname,id}) {\r\n   const[randomNumber,setRandom]=useState('')\r\n   const [messages,setMessages]=useState([])\r\n\r\n    //algo to generate random number\r\n    useEffect(()=>{\r\n        setRandom(Math.floor(Math.random()*10000))\r\n    },[])\r\n\r\n    //useEffect to render last message in this channel\r\n    useEffect(()=>{\r\n          if(id){\r\n            db.collection('Room').doc(id).collection('Messages').orderBy('timestamp','asc').onSnapshot(snap=>{\r\n              setMessages(snap.docs.map(doc=>doc.data()))\r\n            })\r\n          }\r\n    },[])\r\n    console.log(messages)\r\n\r\n  return (\r\n    <Link className=\"link\" to={`/rooms/${id}`}>\r\n     <div className=\"chats\">\r\n      <Avatar src={`https://avatars.dicebear.com/api/human/${randomNumber}.svg`}/>\r\n     <div className=\"chat-info\">\r\n       <h2>{channelname}</h2>\r\n       <p>{messages[messages.length-1]?.text}</p>\r\n     </div>\r\n     <Badge badgeContent={4} color=\"secondary\">\r\n        <MailIcon />\r\n      </Badge>\r\n    </div>\r\n    </Link>\r\n   \r\n  )\r\n}\r\n\r\nexport default SidebarChats"]},"metadata":{},"sourceType":"module"}