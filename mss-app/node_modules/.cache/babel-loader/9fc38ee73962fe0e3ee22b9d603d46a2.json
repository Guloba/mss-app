{"ast":null,"code":"import _slicedToArray from\"C:/Users/Me/OneDrive/Desktop/Project/mss-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import\"./SidebarChats.css\";import{Avatar,IconButton}from\"@material-ui/core\";import{Link}from\"react-router-dom\";import Badge from'@material-ui/core/Badge';import MailIcon from'@material-ui/icons/Mail';import db from\"./firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SidebarChats(_ref){var _messages;var channelname=_ref.channelname,id=_ref.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),randomNumber=_useState2[0],setRandom=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];//algo to generate random number\nuseEffect(function(){setRandom(Math.floor(Math.random()*10000));},[]);//useEffect to render last message in this channel\nuseEffect(function(){if(id){db.collection('Rooms').doc(id).collection('Messages').orderBy('timestamp','asc').onSnapshot(function(snap){setMessages(snap.docs.map(function(doc){return doc.data();}));});}},[id]);// console.log(messages)\nreturn/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/rooms/\".concat(id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"chats\",children:[/*#__PURE__*/_jsx(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(randomNumber,\".svg\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:channelname}),(messages===null||messages===void 0?void 0:messages.length)>0?/*#__PURE__*/_jsx(\"p\",{children:(_messages=messages[messages.length-1])===null||_messages===void 0?void 0:_messages.text}):/*#__PURE__*/_jsx(\"p\",{className:\"empty-array\",children:\"This channel has no messages\"})]}),/*#__PURE__*/_jsx(Badge,{className:\"badge\",badgeContent:messages===null||messages===void 0?void 0:messages.length,color:\"secondary\",children:/*#__PURE__*/_jsx(MailIcon,{})})]})});}export default SidebarChats;","map":{"version":3,"sources":["C:/Users/Me/OneDrive/Desktop/Project/mss-app/src/SidebarChats.js"],"names":["React","useEffect","useState","Avatar","IconButton","Link","Badge","MailIcon","db","SidebarChats","channelname","id","randomNumber","setRandom","messages","setMessages","Math","floor","random","collection","doc","orderBy","onSnapshot","snap","docs","map","data","length","text"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,MAAO,oBAAP,CACA,OAAQC,MAAR,CAAgBC,UAAhB,KAAiC,mBAAjC,CACA,OAASC,IAAT,KAAoB,kBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,C,wFACA,QAASC,CAAAA,YAAT,MAAwC,kBAAjBC,CAAAA,WAAiB,MAAjBA,WAAiB,CAALC,EAAK,MAALA,EAAK,CACrC,cAA8BT,QAAQ,CAAC,EAAD,CAAtC,wCAAMU,YAAN,eAAmBC,SAAnB,eACA,eAA6BX,QAAQ,CAAC,EAAD,CAArC,yCAAOY,QAAP,eAAgBC,WAAhB,eAEC;AACAd,SAAS,CAAC,UAAI,CACVY,SAAS,CAACG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAc,KAAzB,CAAD,CAAT,CACH,CAFQ,CAEP,EAFO,CAAT,CAIA;AACAjB,SAAS,CAAC,UAAI,CACR,GAAGU,EAAH,CAAM,CACJH,EAAE,CAACW,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BT,EAA3B,EAA+BQ,UAA/B,CAA0C,UAA1C,EAAsDE,OAAtD,CAA8D,WAA9D,CAA0E,KAA1E,EAAiFC,UAAjF,CAA4F,SAAAC,IAAI,CAAE,CAChGR,WAAW,CAACQ,IAAI,CAACC,IAAL,CAAUC,GAAV,CAAc,SAAAL,GAAG,QAAEA,CAAAA,GAAG,CAACM,IAAJ,EAAF,EAAjB,CAAD,CAAX,CACD,CAFD,EAGD,CACN,CANQ,CAMP,CAACf,EAAD,CANO,CAAT,CAOA;AAEF,mBACE,KAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,EAAE,kBAAYA,EAAZ,CAAzB,uBACC,aAAK,SAAS,CAAC,OAAf,wBACC,KAAC,MAAD,EAAQ,GAAG,kDAA4CC,YAA5C,QAAX,EADD,cAEA,aAAK,SAAS,CAAC,WAAf,wBACE,oBAAKF,WAAL,EADF,CAEG,CAAAI,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEa,MAAV,EAAkB,CAAlB,cACA,8BAAIb,QAAQ,CAACA,QAAQ,CAACa,MAAT,CAAgB,CAAjB,CAAZ,oCAAI,UAA6BC,IAAjC,EADA,cAGC,UAAG,SAAS,CAAC,aAAb,0CALJ,GAFA,cAWA,KAAC,KAAD,EAAO,SAAS,CAAC,OAAjB,CAAyB,YAAY,CAAEd,QAAF,SAAEA,QAAF,iBAAEA,QAAQ,CAAEa,MAAjD,CAAyD,KAAK,CAAC,WAA/D,uBACG,KAAC,QAAD,IADH,EAXA,GADD,EADF,CAoBD,CAED,cAAelB,CAAAA,YAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport \"./SidebarChats.css\"\r\nimport {Avatar, IconButton} from \"@material-ui/core\"\r\nimport { Link} from \"react-router-dom\";\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport db from \"./firebase\"\r\nfunction SidebarChats({channelname,id}) {\r\n   const[randomNumber,setRandom]=useState('')\r\n   const [messages,setMessages]=useState([])\r\n\r\n    //algo to generate random number\r\n    useEffect(()=>{\r\n        setRandom(Math.floor(Math.random()*10000))\r\n    },[])\r\n\r\n    //useEffect to render last message in this channel\r\n    useEffect(()=>{\r\n          if(id){\r\n            db.collection('Rooms').doc(id).collection('Messages').orderBy('timestamp','asc').onSnapshot(snap=>{\r\n              setMessages(snap.docs.map(doc=>doc.data()))\r\n            })\r\n          }\r\n    },[id])\r\n    // console.log(messages)\r\n\r\n  return (\r\n    <Link className=\"link\" to={`/rooms/${id}`}>\r\n     <div className=\"chats\">\r\n      <Avatar src={`https://avatars.dicebear.com/api/human/${randomNumber}.svg`}/>\r\n     <div className=\"chat-info\">\r\n       <h2>{channelname}</h2>\r\n       {messages?.length> 0 ?(\r\n        <p>{messages[messages.length-1]?.text}</p>\r\n       ):(\r\n         <p className=\"empty-array\">This channel has no messages</p>\r\n       )}\r\n       \r\n     </div>\r\n     <Badge className=\"badge\" badgeContent={messages?.length} color=\"secondary\">\r\n        <MailIcon />\r\n      </Badge>\r\n    </div>\r\n    </Link>\r\n   \r\n  )\r\n}\r\n\r\nexport default SidebarChats"]},"metadata":{},"sourceType":"module"}